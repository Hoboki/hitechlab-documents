# PicoにOSをインストールする

## ほとんどはこれを見れば分かる
>[【NuttX】ラズパイPicoにOSをインストールしてみた！ - YouTube](https://www.youtube.com/watch?v=zz_Z2tBOVvI&t=320s)

Ubuntuでプロジェクトフォルダに移動し、Shellファイルをダウンロード&実行
```
wget https://raw.githubusercontent.com/raspberrypi/pico-setup/master/pico_setup.sh
chmod +x pico_setup.sh
./pico_setup.sh
```
Githubから必要なパッケージをクローン
```
sudo apt install bison flex gettext libncurses5-dev gperf automake-1.15 libtool pkg-config
git clone https://github.com/apache/incubator-nuttx.git nuttx
git clone https://github.com/apache/incubator-nuttx-apps.git apps
git clone https://bitbucket.org/nuttx/tools.git
```
ディレクトリを移動して4つのコマンドを実行
```
cd tools/kconfig-frontends/
./configure --enable-mconf --disable-nconf --disable-gconf --disable-qconf
make
sudo make install
sudo /sbin/ldconfig
```

pico/nuttxに移動してビルド
```
cd ../../nuttx
./tools/configure.sh raspberrypi-pico:nsh
```

Pico送信側端子UART0 TXの番号を指定
```
make menuconfig
```

[0]UART0 configを使っているUART0 TX端子のGP番号(0 or 12 or 16 or 28)に指定してSAVE。EXIT 2回で閉じる。(GP番号：Pico裏面のGP～の番号)

viコマンドで.bashrc（設定ファイル）にパスを書き込む
```bash
vi ~/.bashrc
```
```
export PICO_SDK_PATH=/mnt/c/Users/川畑輝一/Documents/hitechlab/pico-hi/os/pico/pico-sdk
export PICO_EXAMPLES_PATH=/mnt/c/Users/川畑輝一/Documents/hitechlab/pico-hi/os/pico/pico-examples
export PICO_EXTRAS_PATH=/mnt/c/Users/川畑輝一/Documents/hitechlab/pico-hi/os/pico/pico-extras
export PICO_PLAYGROUND_PATH=/mnt/c/Users/川畑輝一/Documents/hitechlab/pico-hi/os/pico/pico-playground
```
Escボタンを押して、:wqコマンド入力&Enterで保存&終了
```vim
:wq
```
sourceコマンドで~/.bashrcを即座に反映
```bash
source ~/.bashrc
```

UF2ファイルを作成
```
make
```

PicoにUF2ファイルを移動。

___
## UART通信
現在はUSBを介したシリアル通信が出来ないので、PGIO端子上のUART端子で接続する。
UARTとは、Universal Asynchronous Receiver/Transmitterの頭文字をとった用語で、直訳すると汎用非同期式送受信機
>[UARTとは？シリアル通信に欠かせない集積回路を徹底解説！ | 半導体・電子部品とは | CoreContents](https://contents.zaikostore.com/semiconductor/4816/)

PicoのDocumentでUART通信ができるピンを選択。例えばGP1を出力（UART0 TX）、GP2を入力（UART0 RX）、GP3をGNDとして使う。

## Rasberry Piの設定
RasPiでGPIOシリアル接続ができるように設定しなければならない。
```
sudo raspi-config
```
Interface Options→Serial Portを選択。2つの質問に答える。<br>
Would you like a login shell to be accessible over serial? いいえ<br>
Would you like the port hardware to be enabled? はい<br>
finishして求められたら再起動。

## Raspberry Piとの接続
Documentの通りにRasPiとPicoを接続。

>[Getting started with Raspberry Pi Pico](https://datasheets.raspberrypi.org/pico/getting-started-with-pico.pdf)

RasPiのターミナルでMinicomをインストールし、シリアル接続すればnshが出てくる。
```bash
sudo apt install minicom
minicom -b 115200 -o -D /dev/serial0
```
___

__Qustion__
